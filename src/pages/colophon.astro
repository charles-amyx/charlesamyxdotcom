---
import Layout from "../layouts/Layout.astro";

const technologies = [
  {
    category: "Core Framework",
    items: [
      {
        name: "Astro",
        description: "Static site generator with excellent performance",
      },
      { name: "TypeScript", description: "Type-safe JavaScript development" },
      {
        name: "Alpine.js",
        description: "Lightweight JavaScript framework for interactivity",
      },
    ],
  },
  {
    category: "Styling",
    items: [
      { name: "Tailwind CSS", description: "Utility-first CSS framework" },
      {
        name: "Satoshi",
        description:
          "Variable font family chosen for its modern, geometric design and excellent readability",
      },
    ],
  },
  {
    category: "Build & Deployment",
    items: [
      { name: "View Transitions API", description: "Smooth page transitions" },
      { name: "Node Vibrant", description: "Color extraction from images" },
      { name: "CI/CD", description: "Automated deployment pipeline" },
    ],
  },
];

const philosophies = [
  "I tried for a minimalist design that emphasizes content and typography. As well as a performance-first approach with minimal JavaScript. It's responsive and accessible.",
];

const sustainabilityFeatures = [
  {
    feature: "Minimal JavaScript",
    impact: "Reduces CPU usage and battery drain on user devices",
  },
  {
    feature: "Static Site Generation",
    impact: "Minimizes server resources and reduces energy consumption",
  },
  {
    feature: "Optimized Images",
    impact: "Reduces bandwidth usage and storage requirements",
  },
  {
    feature: "System Fonts",
    impact: "Eliminates additional font file downloads where possible",
  },
  {
    feature: "Efficient Caching",
    impact: "Reduces server requests and bandwidth usage",
  },
];
---

<Layout title="Colophon | Charles E. Amyx, III">
  <section class="container mx-auto px-4 pt-12 md:pt-16 lg:pt-24">
    <div
      class="prose prose-p:text-text/90 prose-headings:text-text prose-lg prose-ul:text-text/80 prose-li:text-text/80 max-w-3xl mx-auto"
    >
      <h1 class="text-3xl font-semibold mb-8">Colophon</h1>

      <p class="text-lg mb-4">
        This site was crafted with attention to detail, performance, and user
        experience. Here's a look behind the scenes at the tools and
        technologies that make it possible.
      </p>
      {
        philosophies.map((philosophy) => (
          <p class="text-lg mb-12">{philosophy}</p>
        ))
      }
    </div>

    <div
      class="grid grid-cols-1 transition-all duration-500 ease-in-out lg:grid-cols-3 gap-12 prose prose-p:text-text/90 prose-headings:text-text prose-ul:text-text/80 prose-li:text-text/80 max-w-none"
    >
      {
        technologies.map((tech) => (
          <div class="">
            <h2 class="text-xl font-semibold mb-4">{tech.category}</h2>
            {tech.items.map((item) => (
              <div class="mb-8 last:mb-0">
                <h3 class="text-lg font-medium mb-1">{item.name}</h3>
                <p class="text-text/80">{item.description}</p>
              </div>
            ))}
          </div>
        ))
      }
    </div>
    <div
      class="my-12 prose prose-p:text-text/90 prose-headings:text-text prose-sm prose-li:text-text/80"
    >
      <h2 class="text-xl font-semibold mb-4">Digital Sustainability</h2>
      <p class="text-lg mb-4">
        This site is built with environmental impact in mind. According to the
        <a
          href="https://www.websitecarbon.com/website/charlesamyx-com/"
          target="_blank"
          rel="noopener noreferrer">Website Carbon Calculator</a
        >, this page is cleaner than {72}% of web pages tested.
      </p>
      <div class="mb-12">
        {
          sustainabilityFeatures.map((item) => (
            <div class="mb-8 last:mb-0">
              <h3 class="text-lg font-medium mb-1">{item.feature}</h3>
              <p class="text-text/80">{item.impact}</p>
            </div>
          ))
        }
      </div>
      <div class="mt-6 p-4 bg-neutral/50 rounded-sm">
        <p class="text-sm text-text/80">
          Want to check this site's carbon footprint? Visit
          <a
            href="https://www.websitecarbon.com/website/charlesamyx-com/"
            target="_blank"
            rel="noopener noreferrer"
            class="text-accent hover:underline"
          >
            Website Carbon Calculator
          </a>
        </p>
        <div id="wcb" class="carbonbadge">
          <div id="wcb_loading" class="text-sm text-text/80">
            Loading carbon footprint data...
          </div>
          <div id="wcb_error" class="text-sm text-red-500 hidden">
            Unable to load carbon data. Please check directly on
            <a
              href="https://www.websitecarbon.com/website/charlesamyx-com/"
              class="underline"
              target="_blank"
              rel="noopener noreferrer"
            >
              Website Carbon Calculator
            </a>
          </div>
        </div>
        <script>
          window.addEventListener("load", function () {
            const loadScript = () => {
              return new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.src =
                  "https://unpkg.com/website-carbon-badges@1.1.3/b.min.js";
                script.async = true;
                script.onload = resolve;
                script.onerror = reject;
                document.body.appendChild(script);
              });
            };

            const showError = () => {
              document.getElementById("wcb_loading")?.classList.add("hidden");
              document.getElementById("wcb_error")?.classList.remove("hidden");
            };

            loadScript().catch(showError);

            setTimeout(() => {
              if (!document.querySelector("#wcb .wcb_g")) {
                showError();
              }
            }, 5000);
          });
        </script>
      </div>
    </div>
  </section>
</Layout>
