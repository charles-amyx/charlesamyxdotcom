---

---

<script>
  let Alpine: any;

  async function initAlpine() {
    if (!window.Alpine) {
      try {
        // Import Alpine and plugins
        const [alpine, intersect] = await Promise.all([
          import("alpinejs"),
          import("@alpinejs/intersect"),
        ]);

        Alpine = alpine.default;

        // Register plugins before starting Alpine
        Alpine.plugin(intersect.default);

        // Store Alpine globally
        window.Alpine = Alpine;

        // Start Alpine
        Alpine.start();
      } catch (error) {
        console.error("Error initializing Alpine:", error);
      }
    }
  }

  // Initialize on first load
  initAlpine();

  // Reinitialize after navigation
  document.addEventListener("astro:after-swap", () => {
    // Small delay to ensure DOM is ready
    setTimeout(initAlpine, 0);
  });
</script>
